import{u as e,r as l,E as t,o as r,c as o,w as s,a,b as i,d,e as n,f as u,g as c,h as f,i as m,j as h,k as p,l as b,m as g,n as y,t as V,F as w,p as C,q as _,s as U,v as P,x as k,y as D,z as x,A as O,B as F,C as S}from"./vendor.1713a6bb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&l(e)})).observe(document,{childList:!0,subtree:!0})}function l(e){if(e.ep)return;e.ep=!0;const l=function(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerpolicy&&(l.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?l.credentials="include":"anonymous"===e.crossorigin?l.credentials="omit":l.credentials="same-origin",l}(e);fetch(e.href,l)}}();const L={components:{UploadFilled:e},props:{refData:{required:!0},fileList:{type:Array,required:!0}},methods:{handleChange(e,l){const t=new FileReader;t.onload=e=>{try{const l=JSON.parse(e.target.result);this.refData.val=l}catch(l){console.log(`File Import Error: ${l}`)}},t.readAsText(e.raw)}}},v=i("div",{class:"el-upload__text"},[d(" Drop file here or "),i("em",null,"click to upload")],-1),E=i("div",{class:"el-upload__tip"}," Use the exported file or write json/text by yourself. ",-1);L.render=function(e,i,d,u,c,f){const m=l("upload-filled"),h=n,p=t;return r(),o(p,{class:"upload-demo",drag:"","auto-upload":!1,"on-change":f.handleChange,"file-list":d.fileList},{tip:s((()=>[E])),default:s((()=>[a(h,{class:"el-icon--upload"},{default:s((()=>[a(m)])),_:1}),v])),_:1},8,["on-change","file-list"])};var N={data:()=>({fileValue:{val:null},fileList:[],db:null,sortOrders:[{label:"降序",value:"descending"},{label:"升序",value:"ascending"}],search:"",filterTableData:[],userCreate:"",dialogFormVisible:!1,dialogFileVisible:!1,form:{name:"",deposit:0,increase:0,decrease:0,used:0},isEdit:!1,beforeEditName:""}),methods:{handleDelete(e){ve(this,e,M)},handleCreate(){this.form.name="",this.form.deposit=0,this.form.increase=0,this.form.decrease=0,this.form.used=0,this.dialogFormVisible=!0},handleEdit(){const e={name:this.form.name,deposit:Number(this.form.deposit)+Number(this.form.increase)-Number(this.form.decrease),used:this.form.used};this.isEdit&&ve(this,this.beforeEditName,(()=>{})),Le(this,e,M),this.search=e.name},handleExport(){const e=je(this.db);e.onsuccess=l=>{const t=e.result;!function(e,l,t){let r=new Blob([e],{type:l}),o=URL.createObjectURL(r),s=document.createElement("a");s.download=t,s.href=o,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}(JSON.stringify(t),"application/json","users.json")},e.onerror=e=>{alert("数据导出失败")}},handleImport(){var e;e=this,this.fileValue.val.forEach((l=>{Le(e,l,M)})),this.fileList=[]}},mounted(){Se(this,M)}};const j=new Set;class T{constructor(e,l){this.id=l,this.name=e.name,this.deposit=e.deposit,this.used=e.used,this.balance=e.deposit-e.used}}function M(e){const l=je(e.db);l.onsuccess=t=>{j.clear();let r=1;l.result.forEach((e=>{j.add(new T(e,r++))})),e.filterTableData=u((()=>Array.from(j).filter((l=>!e.search||l.name.toLowerCase().includes(e.search.toLowerCase())))))},l.onerror=e=>{alert("数据刷新失败")}}const I=d("Create"),R=d("Export"),z=d("Import"),B=d(" 编辑 "),A=d("删除"),J=d("   -   "),q={class:"dialog-footer"},Y=d("Cancel"),K=d(" Confirm "),$={class:"dialog-footer"},G=d("Cancel"),H=d(" Confirm ");N.render=function(e,l,t,o,n,u){const C=c,_=f,U=m,P=h,k=p,D=b,x=g,O=L;return r(),y(w,null,[a(C,{type:"danger",onClick:l[0]||(l[0]=e=>{u.handleCreate(),n.isEdit=!1})},{default:s((()=>[I])),_:1}),a(C,{type:"danger",onClick:l[1]||(l[1]=e=>u.handleExport())},{default:s((()=>[R])),_:1}),a(C,{type:"danger",onClick:l[2]||(l[2]=e=>{n.dialogFileVisible=!0})},{default:s((()=>[z])),_:1}),a(P,{data:n.filterTableData,style:{width:"100%"},"default-sort":{prop:"id",order:"ascending"}},{default:s((()=>[a(_,{prop:"id",label:"id",width:"80"}),a(_,{prop:"name",label:"买家",width:"80",sortable:"","sort-orders":n.sortOrders},null,8,["sort-orders"]),a(_,{prop:"balance",label:"余额",width:"80"}),a(_,{prop:"used",label:"使用",width:"90"}),a(_,{prop:"deposit",label:"总存钱量",width:"90"}),a(_,{align:"center"},{header:s((()=>[a(U,{modelValue:n.search,"onUpdate:modelValue":l[3]||(l[3]=e=>n.search=e),size:"small",placeholder:"Type to search by user"},null,8,["modelValue"])])),default:s((e=>[a(C,{size:"small",onClick:l=>{n.dialogFormVisible=!0,n.isEdit=!0,n.beforeEditName=e.row.name,n.form.name=e.row.name,n.form.deposit=e.row.deposit,n.form.used=e.row.used,n.form.increase=0,n.form.decrease=0}},{default:s((()=>[B])),_:2},1032,["onClick"]),a(C,{size:"small",type:"danger",onClick:l=>u.handleDelete(e.row.name)},{default:s((()=>[A])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),a(x,{modelValue:n.dialogFormVisible,"onUpdate:modelValue":l[9]||(l[9]=e=>n.dialogFormVisible=e),title:"详情/编辑"},{footer:s((()=>[i("span",q,[a(C,{onClick:l[7]||(l[7]=e=>n.dialogFormVisible=!1)},{default:s((()=>[Y])),_:1}),a(C,{type:"primary",onClick:l[8]||(l[8]=e=>{n.dialogFormVisible=!1,u.handleEdit()})},{default:s((()=>[K])),_:1})])])),default:s((()=>[a(D,{model:n.form},{default:s((()=>[a(k,{label:"客户","label-width":"140px"},{default:s((()=>[a(U,{modelValue:n.form.name,"onUpdate:modelValue":l[4]||(l[4]=e=>n.form.name=e),autocomplete:"off",style:{width:"250px"}},null,8,["modelValue"])])),_:1}),a(k,{label:"总存钱数","label-width":"140px"},{default:s((()=>[d(V(n.form.deposit)+" +  ",1),a(U,{modelValue:n.form.increase,"onUpdate:modelValue":l[5]||(l[5]=e=>n.form.increase=e),autocomplete:"off",style:{width:"100px"}},null,8,["modelValue"]),J,a(U,{modelValue:n.form.decrease,"onUpdate:modelValue":l[6]||(l[6]=e=>n.form.decrease=e),autocomplete:"off",style:{width:"100px"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),a(x,{modelValue:n.dialogFileVisible,"onUpdate:modelValue":l[12]||(l[12]=e=>n.dialogFileVisible=e),title:"Import data from file"},{footer:s((()=>[i("span",$,[a(C,{onClick:l[10]||(l[10]=e=>n.dialogFileVisible=!1)},{default:s((()=>[G])),_:1}),a(C,{type:"primary",onClick:l[11]||(l[11]=e=>{n.dialogFileVisible=!1,u.handleImport()})},{default:s((()=>[H])),_:1})])])),default:s((()=>[a(O,{refData:n.fileValue,fileList:n.fileList},null,8,["refData","fileList"])])),_:1},8,["modelValue"])],64)};const Q=new Set;var W={data:()=>({fileValue:{val:null},fileList:[],stages:["接单","订货","厂家接单","我收到","飘洋过海","寄出","买家收到(完成)"],db:null,sortOrders:[{label:"降序",value:"descending"},{label:"升序",value:"ascending"}],search:"",filterTableData:[],userCreate:"",dialogFormVisible:!1,dialogFileVisible:!1,form:{id:-1,user:"",bag:"",buyPrice:0,sellPrice:0,sendPrice:0,sender:"",benefit:0,stage:0,update:new Date,updateStr:"",history:Array()},calculateUsedOriginMoney:0,calculateUsedOriginUser:"",dialogDeleteVisible:!1,deleteId:-1,deleteRadio:0,deleteMoney:0,deleteUser:""}),methods:{handleDelete(){if(1==this.deleteRadio){let e=this,l=Me(this.db,this.deleteUser);l.onsuccess=function(t){let r=l.result;r.used-=e.deleteMoney,Le(e,r)},l.onerror=function(e){alert("原用户获取失败")}}Ne(this,this.deleteId,oe)},handleCreate(){this.form.id=-1,this.form.user="",this.form.bag="",this.form.buyPrice=0,this.form.sellPrice=0,this.form.sendPrice=0,this.form.sender="",this.form.benefit=0,this.form.stage=0,this.form.update=new Date,this.form.history=[{stage:0,date:this.form.update}],this.form.updateStr=this.dateToString(this.form.update),this.calculateUsedOriginMoney=0,this.calculateUsedOriginUser="",this.dialogFormVisible=!0},handleNext(e){let l=Ie(this.db,e),t=this;l.onsuccess=function(e){let r=l.result.history[l.result.history.length-1].stage;6!=r?(l.result.history.push({stage:Number(r)+1,date:new Date}),Ee(t,l.result,oe)):alert("已完成了！")},l.onerror=function(e){alert("状态更新失败")}},showOrderDetail(){if(-1!=this.form.id){let e=Ie(this.db,Number(this.form.id)),l=this;e.onsuccess=function(t){l.form=new le(e.result),l.calculateUsedOriginMoney=Number(l.form.sellPrice),l.calculateUsedOriginUser=l.form.user,l.dialogFormVisible=!0},e.onerror=function(e){alert("获取订单错误,不存在这个id的订单"),l.dialogFormVisible=!1}}},handleEdit(){let e=Me(this.db,this.form.user),l=this;e.onsuccess=function(t){if(void 0===e.result)return alert("该用户不存在, 请先创建该用户"),void(l.dialogFormVisible=!1);{l.form.stage!=l.form.history[l.form.history.length-1].stage&&l.form.history.push({stage:l.form.stage,date:new Date});const t={id:l.form.id,user:l.form.user,bag:l.form.bag,buyPrice:l.form.buyPrice,sellPrice:l.form.sellPrice,sendPrice:l.form.sendPrice,sender:l.form.sender,history:l.form.history};if(Ee(l,t,oe),t.user!=l.calculateUsedOriginUser){let r=e.result;r.used+=t.sellPrice,Le(l,r);let o=Me(l.db,l.calculateUsedOriginUser);o.onsuccess=function(e){let r=o.result;r.used-=t.sellPrice,Le(l,r)},e.onerror=function(e){alert("原用户获取失败")}}else if(t.sellPrice!=l.calculateUsedOriginMoney){let r=e.result;r.used-=l.calculateUsedOriginMoney-t.sellPrice,Le(l,r)}l.search=t.user}},e.onerror=function(e){alert("用户获取失败")}},handleExport(){const e=Te(this.db);e.onsuccess=function(l){const t=e.result,r=JSON.stringify(t);re(r,"application/json","orders.json")},e.onerror=e=>{alert("数据导出失败")}},handleImport(){te(this,this.fileValue.val),this.fileList=[]},dateToString:e=>e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},mounted(){Z(this.stages),Se(this,oe)}};const X=["接单","订货","厂家接单","我收到","飘洋过海","寄出","买家收到(完成)"],Z=e=>{};class ee{constructor(e,l){this.stage=e,this.date=new Date(l)}}class le{constructor(e){this.history=[],this.id=e.id,this.user=e.user,this.bag=e.bag,this.buyPrice=e.buyPrice,this.sellPrice=e.sellPrice,this.sendPrice=e.sendPrice,this.sender=e.sender,this.benefit=e.sellPrice-e.buyPrice-e.sendPrice,this.stage=e.history[e.history.length-1].stage,this.stageStr=X[e.history[e.history.length-1].stage],this.history=e.history.map((e=>new ee(e.stage,e.date))),this.update=this.history[this.history.length-1].date,this.updateStr=this.update.getFullYear()+"-"+(this.update.getMonth()+1)+"-"+this.update.getDate()}}const te=(e,l)=>{l.forEach((l=>{Ee(e,l,oe)}))},re=(e,l,t)=>{const r=new Blob([e],{type:l}),o=URL.createObjectURL(r),s=document.createElement("a");s.download=t,s.href=o,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)},oe=e=>{const l=Te(e.db);l.onsuccess=t=>{Q.clear(),l.result.forEach((e=>{Q.add(new le(e))})),e.filterTableData=u((()=>Array.from(Q).filter((l=>!e.search||l.user.toLowerCase().includes(e.search.toLowerCase())||l.bag.toLowerCase().includes(e.search.toLowerCase())||l.sender.toLowerCase().includes(e.search.toLowerCase())||l.updateStr.includes(e.search)))))},l.onerror=e=>{alert("数据刷新失败")}},se=d("Create"),ae=d("Export"),ie=d("Import"),de=d(" 详情/编辑 "),ne=d("新状态"),ue=d(" 删除 "),ce=d(" 0 - 接单 1 - 订货 2 - 厂家接单 3 - 我收到 4 - 飘洋过海 5 - 寄出 6 - 买家收到(完成) "),fe=i("br",null,null,-1),me=i("br",null,null,-1),he=d(" 历史："),pe=i("br",null,null,-1),be={class:"dialog-footer"},ge=d("Cancel"),ye=d(" Confirm "),Ve=d("否"),we=d("是"),Ce={class:"dialog-footer"},_e=d("Cancel"),Ue=d(" Confirm "),Pe={class:"dialog-footer"},ke=d("Cancel"),De=d(" Confirm ");var xe,Oe;W.render=function(e,l,t,o,n,u){const P=c,k=f,D=m,x=h,O=p,F=b,S=g,v=C,E=_,N=L;return r(),y(w,null,[a(P,{type:"danger",onClick:l[0]||(l[0]=e=>u.handleCreate())},{default:s((()=>[se])),_:1}),a(P,{type:"danger",onClick:l[1]||(l[1]=e=>u.handleExport())},{default:s((()=>[ae])),_:1}),a(P,{type:"danger",onClick:l[2]||(l[2]=e=>{n.dialogFileVisible=!0})},{default:s((()=>[ie])),_:1}),a(x,{data:n.filterTableData,style:{width:"100%"},"default-sort":{prop:"id",order:"descending"}},{default:s((()=>[a(k,{fixed:"",prop:"id",label:"id",width:"70",sortable:"","sort-orders":n.sortOrders},null,8,["sort-orders"]),a(k,{prop:"user",label:"买家",width:"80"}),a(k,{prop:"bag",label:"包名",width:"80"}),a(k,{prop:"stageStr",label:"状态",width:"120"}),a(k,{prop:"updateStr",label:"最新更新日期",width:"135",sortable:"","sort-orders":n.sortOrders,"sort-by":"update"},null,8,["sort-orders"]),a(k,{prop:"benefit",label:"收入计算",width:"110",sortable:"","sort-orders":n.sortOrders},null,8,["sort-orders"]),a(k,{prop:"buyPrice",label:"我买价",width:"90",sortable:"","sort-orders":n.sortOrders},null,8,["sort-orders"]),a(k,{prop:"sellPrice",label:"我卖价",width:"90",sortable:"","sort-orders":n.sortOrders},null,8,["sort-orders"]),a(k,{prop:"sender",label:"快递员",width:"90",sortable:"","sort-orders":n.sortOrders},null,8,["sort-orders"]),a(k,{prop:"sendPrice",label:"快递费",width:"90",sortable:"","sort-orders":n.sortOrders},null,8,["sort-orders"]),a(k,{fixed:"right",align:"center",width:"250"},{header:s((()=>[a(D,{modelValue:n.search,"onUpdate:modelValue":l[3]||(l[3]=e=>n.search=e),size:"small",placeholder:"Type to search by buyer or bag or date or sender"},null,8,["modelValue"])])),default:s((e=>[a(P,{size:"small",onClick:l=>{n.form.id=e.row.id,u.showOrderDetail()}},{default:s((()=>[de])),_:2},1032,["onClick"]),a(P,{size:"small",onClick:l=>u.handleNext(e.row.id)},{default:s((()=>[ne])),_:2},1032,["onClick"]),a(P,{size:"small",type:"danger",onClick:l=>{n.deleteId=e.row.id,n.deleteMoney=e.row.sellPrice,n.deleteUser=e.row.user,n.dialogDeleteVisible=!0}},{default:s((()=>[ue])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),a(S,{modelValue:n.dialogFormVisible,"onUpdate:modelValue":l[13]||(l[13]=e=>n.dialogFormVisible=e),title:"详情/编辑"},{footer:s((()=>[i("span",be,[a(P,{onClick:l[11]||(l[11]=e=>n.dialogFormVisible=!1)},{default:s((()=>[ge])),_:1}),a(P,{type:"primary",onClick:l[12]||(l[12]=e=>{n.dialogFormVisible=!1,u.handleEdit()})},{default:s((()=>[ye])),_:1})])])),default:s((()=>[a(F,{model:n.form},{default:s((()=>[ce,fe,me,a(O,{label:"买家","label-width":"140px"},{default:s((()=>[a(D,{modelValue:n.form.user,"onUpdate:modelValue":l[4]||(l[4]=e=>n.form.user=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),a(O,{label:"包名","label-width":"140px"},{default:s((()=>[a(D,{modelValue:n.form.bag,"onUpdate:modelValue":l[5]||(l[5]=e=>n.form.bag=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),a(O,{label:"我买价","label-width":"140px"},{default:s((()=>[a(D,{modelValue:n.form.buyPrice,"onUpdate:modelValue":l[6]||(l[6]=e=>n.form.buyPrice=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),a(O,{label:"我卖价","label-width":"140px"},{default:s((()=>[a(D,{modelValue:n.form.sellPrice,"onUpdate:modelValue":l[7]||(l[7]=e=>n.form.sellPrice=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),a(O,{label:"快递费","label-width":"140px"},{default:s((()=>[a(D,{modelValue:n.form.sendPrice,"onUpdate:modelValue":l[8]||(l[8]=e=>n.form.sendPrice=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),a(O,{label:"快递员","label-width":"140px"},{default:s((()=>[a(D,{modelValue:n.form.sender,"onUpdate:modelValue":l[9]||(l[9]=e=>n.form.sender=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),a(O,{label:"收益","label-width":"140px"},{default:s((()=>[d("   "+V(n.form.benefit),1)])),_:1}),a(O,{label:"当前状态","label-width":"140px"},{default:s((()=>[a(D,{modelValue:n.form.stage,"onUpdate:modelValue":l[10]||(l[10]=e=>n.form.stage=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"]),d("    更新时间 "+V(n.form.updateStr),1)])),_:1}),i("p",null,[he,pe,(r(!0),y(w,null,U(n.form.history,(e=>(r(),y("label",null,V(n.stages[e.stage])+" = "+V(u.dateToString(e.date))+"   ",1)))),256))])])),_:1},8,["model"])])),_:1},8,["modelValue"]),a(S,{modelValue:n.dialogDeleteVisible,"onUpdate:modelValue":l[17]||(l[17]=e=>n.dialogDeleteVisible=e),title:"是否还原金额到该买家账户"},{footer:s((()=>[i("span",Ce,[a(P,{onClick:l[15]||(l[15]=e=>n.dialogDeleteVisible=!1)},{default:s((()=>[_e])),_:1}),a(P,{type:"primary",onClick:l[16]||(l[16]=e=>{n.dialogDeleteVisible=!1,u.handleDelete()})},{default:s((()=>[Ue])),_:1})])])),default:s((()=>[a(F,{model:n.form},{default:s((()=>[a(O,{"label-width":"140px"},{default:s((()=>[a(E,{modelValue:n.deleteRadio,"onUpdate:modelValue":l[14]||(l[14]=e=>n.deleteRadio=e)},{default:s((()=>[a(v,{label:0},{default:s((()=>[Ve])),_:1}),a(v,{label:1},{default:s((()=>[we])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),a(S,{modelValue:n.dialogFileVisible,"onUpdate:modelValue":l[20]||(l[20]=e=>n.dialogFileVisible=e),title:"Import data from file"},{footer:s((()=>[i("span",Pe,[a(P,{onClick:l[18]||(l[18]=e=>n.dialogFileVisible=!1)},{default:s((()=>[ke])),_:1}),a(P,{type:"primary",onClick:l[19]||(l[19]=e=>{n.dialogFileVisible=!1,u.handleImport()})},{default:s((()=>[De])),_:1})])])),default:s((()=>[a(N,{refData:n.fileValue,fileList:n.fileList},null,8,["refData","fileList"])])),_:1},8,["modelValue"])],64)},(Oe=xe||(xe={}))[Oe.Orders=0]="Orders",Oe[Oe.Users=1]="Users",Oe[Oe.Me=2]="Me";var Fe={data:()=>({sumDeposit:0,sumBenefit:0,activeName:"order"}),components:{Suitcase:P,User:k,CreditCard:D},methods:{handleTabClick(e,l){var t;Number(e.index)===xe.Me&&((t=this).sumBenefit=0,Q.forEach((e=>t.sumBenefit+=e.benefit)),(e=>{e.sumDeposit=0,j.forEach((l=>e.sumDeposit+=l.balance)),console.log(e.sumDeposit)})(this))}}};const Se=(e,l)=>{const t=indexedDB.open("bagPack",1);t.onsuccess=t=>{e.db=t.target.result,l&&l(e)},t.onerror=e=>{console.log("Database error: "+e.target.errorCode)},t.onupgradeneeded=l=>{e.db=l.target.result,e.db.createObjectStore("orders",{keyPath:"id",autoIncrement:!0}),e.db.createObjectStore("users",{keyPath:"name"})}},Le=(e,l,t)=>{const r=e.db.transaction(["users"],"readwrite").objectStore("users").put({name:l.name,deposit:l.deposit,used:l.used});r.onsuccess=l=>{console.log("数据写入成功"),t?t(e):location.reload()},r.onerror=e=>{alert("数据写入失败")}},ve=(e,l,t)=>{const r=e.db.transaction(["users"],"readwrite").objectStore("users").delete(l);r.onsuccess=l=>{console.log("数据删除成功"),t(e)},r.onerror=e=>{alert("数据删除失败")}},Ee=(e,l,t)=>{if(-1===l.id){const r=e.db.transaction(["orders"],"readwrite").objectStore("orders").put({user:l.user,bag:l.bag,buyPrice:l.buyPrice,sellPrice:l.sellPrice,sendPrice:l.sendPrice,sender:l.sender,history:JSON.parse(JSON.stringify(l.history))});return r.onsuccess=l=>{console.log("数据写入成功"),t(e)},void(r.onerror=e=>{alert("数据写入失败")})}const r=e.db.transaction(["orders"],"readwrite").objectStore("orders").put({id:l.id,user:l.user,bag:l.bag,buyPrice:l.buyPrice,sellPrice:l.sellPrice,sendPrice:l.sendPrice,sender:l.sender,history:JSON.parse(JSON.stringify(l.history))});r.onsuccess=l=>{console.log("数据写入成功"),t(e)},r.onerror=e=>{alert("数据写入失败")}},Ne=(e,l,t)=>{const r=e.db.transaction(["orders"],"readwrite").objectStore("orders").delete(l);r.onsuccess=l=>{console.log("数据删除成功"),t(e)},r.onerror=e=>{alert("数据删除失败")}},je=e=>e.transaction(["users"],"readwrite").objectStore("users").getAll();function Te(e){return e.transaction(["orders"],"readwrite").objectStore("orders").getAll()}function Me(e,l){return e.transaction(["users"],"readwrite").objectStore("users").get(l)}function Ie(e,l){return e.transaction(["orders"],"readwrite").objectStore("orders").get(l)}const Re={class:"custom-tabs-label"},ze=i("span",null,"Orders",-1),Be={class:"custom-tabs-label"},Ae=i("span",null,"Users",-1),Je={class:"custom-tabs-label"},qe=i("span",null,"Me",-1),Ye=i("br",null,null,-1),Ke=i("p",{style:{"font-size":"10px"}},[d(" 金额计算: "),i("br"),d(" 1. 订单的“我卖价”会自动扣除到对应买家的个人存款上 "),i("br"),d(" 2. 我的总存款 = 所有买家的余额 （所以这里不包含收益） "),i("br"),d(" 3. 我的总收益 = 所有订单的收益 （所以删除的订单，收益就会消失） ")],-1);Fe.render=function(e,t,u,c,f,m){const h=l("Suitcase"),p=n,b=W,g=x,y=l("User"),w=N,C=l("CreditCard"),_=O,U=F;return r(),o(U,{type:"border-card",class:"demo-tabs",modelValue:f.activeName,"onUpdate:modelValue":t[2]||(t[2]=e=>f.activeName=e),onTabClick:m.handleTabClick},{default:s((()=>[a(g,{name:"order"},{label:s((()=>[i("span",Re,[a(p,null,{default:s((()=>[a(h)])),_:1}),ze])])),default:s((()=>[a(b)])),_:1}),a(g,{name:"user"},{label:s((()=>[i("span",Be,[a(p,null,{default:s((()=>[a(y)])),_:1}),Ae])])),default:s((()=>[a(w)])),_:1}),a(g,{name:"me"},{label:s((()=>[i("span",Je,[a(p,null,{default:s((()=>[a(C)])),_:1}),qe])])),default:s((()=>[a(_,{class:"ml-2",type:"info",size:"large",modelValue:f.sumDeposit,"onUpdate:modelValue":t[0]||(t[0]=e=>f.sumDeposit=e)},{default:s((()=>[d("总存款: "+V(f.sumDeposit),1)])),_:1},8,["modelValue"]),Ye,a(_,{class:"ml-2",type:"info",size:"large",modelValue:f.sumBenefit,"onUpdate:modelValue":t[1]||(t[1]=e=>f.sumBenefit=e)},{default:s((()=>[d("总收益: "+V(f.sumBenefit),1)])),_:1},8,["modelValue"]),Ke])),_:1})])),_:1},8,["modelValue","onTabClick"])};S({setup:e=>(e,l)=>(r(),o(Fe))}).mount("#app");
